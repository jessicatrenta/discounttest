import { useEffect, useRef } from 'react';
import { useExtensionApi } from './api';
/**
 * Returns the `buyerJourney` details on buyer progression in checkout.
 */

export function useBuyerJourney() {
  return useExtensionApi().buyerJourney;
}
/**
 * Returns a function to intercept and block navigation in checkout.
 */

export function useBuyerJourneyIntercept(interceptor) {
  var buyerJourney = useBuyerJourney();
  var interceptorRef = useRef(interceptor);
  interceptorRef.current = interceptor;
  useEffect(function () {
    var teardownPromise = buyerJourney.intercept(function (interceptorProps) {
      return interceptorRef.current(interceptorProps);
    });
    return function () {
      teardownPromise.then(function (teardown) {
        return teardown();
      })["catch"](function () {});
    };
  }, [buyerJourney]);
}